<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP - Администратор</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/role-specific.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --role-color: #e74c3c;
            --role-light: rgba(231, 76, 60, 0.1);
        }
        
        .app-header {
            background: linear-gradient(135deg, var(--role-color), #c0392b);
        }
        
        .nav-btn.active {
            background: var(--role-light);
            color: var(--role-color);
        }
        
        .btn-role {
            background: var(--role-color);
            color: white;
        }
        
        /* Системный мониторинг */
        .system-monitoring {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .system-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .system-stat {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .system-stat .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--role-color);
        }
        
        .system-stat .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .system-stat .stat-sub {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }
        
        /* Управление пользователями */
        .users-management {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .users-tabs {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        .user-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 500;
        }
        
        .user-tab.active {
            border-bottom-color: var(--role-color);
            color: var(--role-color);
        }
        
        .users-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .users-table th {
            text-align: left;
            padding: 12px 16px;
            background: #f8f9fa;
            color: #666;
            font-weight: 600;
            font-size: 14px;
        }
        
        .users-table td {
            padding: 16px;
            border-bottom: 1px solid #eee;
        }
        
        .user-role-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .role-contractor { background: #d4edda; color: #155724; }
        .role-customer { background: #d1ecf1; color: #0c5460; }
        .role-manager { background: #e8d4ff; color: #4a235a; }
        .role-admin { background: #f5c6cb; color: #721c24; }
        
        /* Настройки системы */
        .system-settings {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .settings-category {
            margin-bottom: 30px;
        }
        
        .settings-category h4 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f8f9fa;
        }
        
        .setting-info h5 {
            margin-bottom: 5px;
        }
        
        .setting-info p {
            font-size: 14px;
            color: #666;
        }
        
        /* Логи системы */
        .system-logs {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .logs-container {
            height: 400px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.6;
        }
        
        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .log-time {
            color: #666;
            margin-right: 10px;
        }
        
        .log-level {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .log-level.info { background: #d1ecf1; color: #0c5460; }
        .log-level.warning { background: #fff3cd; color: #856404; }
        .log-level.error { background: #f5c6cb; color: #721c24; }
        .log-level.success { background: #d4edda; color: #155724; }
        
        /* Шаблоны и КП */
        .templates-management {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .template-card {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s ease;
        }
        
        .template-card:hover {
            border-color: var(--role-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .template-icon {
            font-size: 32px;
            color: var(--role-color);
            margin-bottom: 15px;
        }
        
        /* Резервное копирование */
        .backup-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .backup-status {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .backup-info {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .system-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .templates-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Шапка -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <button class="menu-btn" id="menuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="logo-small">
                        <h1>ESP</h1>
                        <span>Администратор</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="system-status">
                        <span class="status-dot online"></span>
                        <span>Система активна</span>
                    </div>
                    <div class="user-avatar">СВ</div>
                </div>
            </div>
        </header>
        
        <!-- Боковое меню -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-info-large">
                    <div class="user-avatar-large">СВ</div>
                    <div class="user-details">
                        <h3>Сергей Васильев</h3>
                        <p>Системный администратор</p>
                        <p class="user-status">
                            <i class="fas fa-shield-alt" style="color: #3498db;"></i>
                            Супер-администратор
                        </p>
                    </div>
                </div>
                <button class="sidebar-close" id="sidebarClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="sidebar-nav">
                <a href="#dashboard" class="nav-link active">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Панель управления</span>
                </a>
                <a href="#users" class="nav-link">
                    <i class="fas fa-users-cog"></i>
                    <span>Пользователи</span>
                    <span class="badge">42</span>
                </a>
                <a href="#roles" class="nav-link">
                    <i class="fas fa-user-tag"></i>
                    <span>Роли и права</span>
                </a>
                <a href="#system" class="nav-link">
                    <i class="fas fa-cogs"></i>
                    <span>Настройки системы</span>
                </a>
                <a href="#templates" class="nav-link">
                    <i class="fas fa-file-contract"></i>
                    <span>Шаблоны и КП</span>
                </a>
                <a href="#analytics" class="nav-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>Аналитика</span>
                </a>
                <a href="#logs" class="nav-link">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Логи системы</span>
                    <span class="badge badge-red">1,248</span>
                </a>
                <a href="#backup" class="nav-link">
                    <i class="fas fa-database"></i>
                    <span>Резервное копирование</span>
                </a>
                <a href="#api" class="nav-link">
                    <i class="fas fa-code"></i>
                    <span>API и интеграции</span>
                </a>
                <a href="#security" class="nav-link">
                    <i class="fas fa-shield-alt"></i>
                    <span>Безопасность</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <div class="system-info">
                    <h4>Системная информация</h4>
                    <div class="system-details">
                        <div>Версия: 3.2.1</div>
                        <div>База данных: 24.8 ГБ</div>
                        <div>Активных сессий: 18</div>
                    </div>
                </div>
                <a href="#logout" class="nav-link logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Выйти</span>
                </a>
            </div>
        </nav>
        
        <!-- Основной контент -->
        <main class="main-content">
            <!-- Системный мониторинг -->
            <div class="system-monitoring">
                <h3 class="section-title">Мониторинг системы</h3>
                <div class="system-stats">
                    <div class="system-stat">
                        <div class="stat-value">42</div>
                        <div class="stat-label">Активных пользователя</div>
                        <div class="stat-sub">+3 за неделю</div>
                    </div>
                    
                    <div class="system-stat">
                        <div class="stat-value">18</div>
                        <div class="stat-label">Текущих сессий</div>
                        <div class="stat-sub">Стабильно</div>
                    </div>
                    
                    <div class="system-stat">
                        <div class="stat-value">98.7%</div>
                        <div class="stat-label">Аптайм системы</div>
                        <div class="stat-sub">За 30 дней</div>
                    </div>
                    
                    <div class="system-stat">
                        <div class="stat-value">2.4с</div>
                        <div class="stat-label">Средний отклик</div>
                        <div class="stat-sub">В норме</div>
                    </div>
                </div>
            </div>
            
            <!-- Управление пользователями -->
            <div class="users-management">
                <div class="table-header">
                    <h3>Управление пользователями</h3>
                    <div class="table-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-filter"></i> Фильтр
                        </button>
                        <button class="btn btn-role">
                            <i class="fas fa-user-plus"></i> Добавить пользователя
                        </button>
                    </div>
                </div>
                
                <div class="users-tabs">
                    <button class="user-tab active">Все пользователи</button>
                    <button class="user-tab">Заказчики</button>
                    <button class="user-tab">Подрядчики</button>
                    <button class="user-tab">Менеджеры</button>
                    <button class="user-tab">Администраторы</button>
                </div>
                
                <div class="table-responsive">
                    <table class="users-table">
                        <thead>
                            <tr>
                                <th>Пользователь</th>
                                <th>Роль</th>
                                <th>Компания</th>
                                <th>Статус</th>
                                <th>Последний вход</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <div class="user-name">Алексей Борисов</div>
                                        <div class="user-email">alex@techintegrator.ru</div>
                                    </div>
                                </td>
                                <td>
                                    <span class="user-role-badge role-customer">Заказчик</span>
                                </td>
                                <td>ООО "Техноинтегратор"</td>
                                <td>
                                    <span class="badge badge-success">Активен</span>
                                </td>
                                <td>2 часа назад</td>
                                <td>
                                    <button class="btn btn-small">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-small">
                                        <i class="fas fa-key"></i>
                                    </button>
                                </td>
                            </tr>
                            
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <div class="user-name">Иван Петров</div>
                                        <div class="user-email">ivan@crew7.ru</div>
                                    </div>
                                </td>
                                <td>
                                    <span class="user-role-badge role-contractor">Подрядчик</span>
                                </td>
                                <td>Бригада №7</td>
                                <td>
                                    <span class="badge badge-success">На объекте</span>
                                </td>
                                <td>15 минут назад</td>
                                <td>
                                    <button class="btn btn-small">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-small">
                                        <i class="fas fa-key"></i>
                                    </button>
                                </td>
                            </tr>
                            
                            <tr>
                                <td>
                                    <div class="user-info">
                                        <div class="user-name">Мария Петрова</div>
                                        <div class="user-email">maria@npk-edtech.ru</div>
                                    </div>
                                </td>
                                <td>
                                    <span class="user-role-badge role-manager">Менеджер</span>
                                </td>
                                <td>ООО "НПК Эдтех"</td>
                                <td>
                                    <span class="badge badge-success">Онлайн</span>
                                </td>
                                <td>5 минут назад</td>
                                <td>
                                    <button class="btn btn-small">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-small">
                                        <i class="fas fa-key"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Настройки системы -->
            <div class="system-settings">
                <h3 class="section-title">Настройки системы</h3>
                <div class="settings-grid">
                    <div class="settings-category">
                        <h4>Основные настройки</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h5>Название платформы</h5>
                                <p>EdTech Solutions Platform</p>
                            </div>
                            <button class="btn btn-small">Изменить</button>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h5>Время работы системы</h5>
                                <p>24/7</p>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="system24h" checked>
                                <label for="system24h"></label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h5>Часовой пояс</h5>
                                <p>Москва (GMT+3)</p>
                            </div>
                            <button class="btn btn-small">Изменить</button>
                        </div>
                    </div>
                    
                    <div class="settings-category">
                        <h4>Уведомления</h4>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h5>Email уведомления</h5>
                                <p>Включены для всех ролей</p>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="emailNotify" checked>
                                <label for="emailNotify"></label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h5>Push-уведомления</h5>
                                <p>Только для бригад</p>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="pushNotify" checked>
                                <label for="pushNotify"></label>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h5>SMS уведомления</h5>
                                <p>Только для срочных задач</p>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="smsNotify">
                                <label for="smsNotify"></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Логи системы -->
            <div class="system-logs">
                <div class="table-header">
                    <h3>Системные логи</h3>
                    <div class="table-actions">
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Экспорт
                        </button>
                        <button class="btn btn-role">
                            <i class="fas fa-trash"></i> Очистить логи
                        </button>
                    </div>
                </div>
                <div class="logs-container">
                    <div class="log-entry">
                        <span class="log-time">14:30:45</span>
                        <span class="log-level info">INFO</span>
                        <span>Пользователь Иван Петров вошел в систему</span>
                    </div>
                    <div class="log-entry">
                        <span class="log-time">14:31:20</span>
                        <span class="log-level success">SUCCESS</span>
                        <span>Фотоотчет загружен для задачи #1542</span>
                    </div>
                    <div class="log-entry">
                        <span class="log-time">14:32:05</span>
                        <span class="log-level warning">WARNING</span>
                        <span>Задержка на объекте "ТЦ Авиапарк" более 2 часов</span>
                    </div>
                    <div class="log-entry">
                        <span class="log-time">14:33:15</span>
                        <span class="log-level info">INFO</span>
                        <span>Менеджер Мария Петрова создала новую задачу</span>
                    </div>
                </div>
            </div>
            
            <!-- Шаблоны и КП -->
            <div class="templates-management">
                <h3 class="section-title">Управление шаблонами</h3>
                <div class="templates-grid">
                    <div class="template-card">
                        <div class="template-icon">
                            <i class="fas fa-file-invoice"></i>
                        </div>
                        <h4>КП для LED-монтажа</h4>
                        <p>Шаблон коммерческого предложения для монтажа LED-панелей</p>
                        <div class="template-actions" style="margin-top: 15px;">
                            <button class="btn btn-small btn-role">Редактировать</button>
                        </div>
                    </div>
                    
                    <div class="template-card">
                        <div class="template-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h4>Чек-лист монтажа</h4>
                        <p>Стандартный чек-лист для бригад по монтажным работам</p>
                        <div class="template-actions" style="margin-top: 15px;">
                            <button class="btn btn-small btn-role">Редактировать</button>
                        </div>
                    </div>
                    
                    <div class="template-card">
                        <div class="template-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>Отчет для заказчика</h4>
                        <p>Шаблон еженедельного отчета по проекту</p>
                        <div class="template-actions" style="margin-top: 15px;">
                            <button class="btn btn-small btn-role">Редактировать</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Резервное копирование -->
            <div class="backup-section">
                <h3 class="section-title">Резервное копирование</h3>
                <div class="backup-status">
                    <div class="backup-icon">
                        <i class="fas fa-database" style="font-size: 48px; color: var(--role-color);"></i>
                    </div>
                    <div class="backup-info">
                        <h4>Последнее резервное копирование</h4>
                        <p>Выполнено сегодня в 02:00 • Размер: 24.8 ГБ</p>
                        <p class="backup-next">Следующее копирование: завтра в 02:00</p>
                    </div>
                    <div class="backup-actions">
                        <button class="btn btn-role">
                            <i class="fas fa-play"></i> Запустить сейчас
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Нижнее меню -->
        <nav class="bottom-nav">
            <a href="#dashboard" class="nav-btn active">
                <i class="fas fa-tachometer-alt"></i>
                <span>Панель</span>
            </a>
            <a href="#users" class="nav-btn">
                <i class="fas fa-users"></i>
                <span>Пользователи</span>
                <span class="badge-mini">42</span>
            </a>
            <a href="#system" class="nav-btn">
                <i class="fas fa-cogs"></i>
                <span>Настройки</span>
            </a>
            <a href="#logs" class="nav-btn">
                <i class="fas fa-clipboard-list"></i>
                <span>Логи</span>
                <span class="badge-mini">1,248</span>
            </a>
        </nav>
    </div>
    
    <!-- Модальное окно добавления пользователя -->
    <div class="modal" id="addUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Добавить нового пользователя</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Форма добавления пользователя -->
            </div>
        </div>
    </div>
    
    <script src="js/main.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
